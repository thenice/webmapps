<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: SpatialColumn</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">SpatialColumn</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/vendor/plugins/spatial_adapter/lib/common_spatial_adapter_rb.html">
                vendor/plugins/spatial_adapter/lib/common_spatial_adapter.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
using a mixin instead of subclassing Column since each adapter can have a
specific subclass of Column
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000037">klass</a>&nbsp;&nbsp;
      <a href="#M000034">new</a>&nbsp;&nbsp;
      <a href="#M000035">type_cast</a>&nbsp;&nbsp;
      <a href="#M000036">type_cast_code</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">geometry_type</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">srid</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">with_m</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">with_z</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(name, default, sql_type = nil, null = true,srid=-1,with_z=false,with_m=false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/spatial_adapter/lib/common_spatial_adapter.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">default</span>, <span class="ruby-identifier">sql_type</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">null</span> = <span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">srid</span>=<span class="ruby-value">-1</span>,<span class="ruby-identifier">with_z</span>=<span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">with_m</span>=<span class="ruby-keyword kw">false</span>)
116:     <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">name</span>,<span class="ruby-identifier">default</span>,<span class="ruby-identifier">sql_type</span>,<span class="ruby-identifier">null</span>)
117:     <span class="ruby-ivar">@geometry_type</span> = <span class="ruby-identifier">geometry_simplified_type</span>(<span class="ruby-ivar">@sql_type</span>)
118:     <span class="ruby-ivar">@srid</span> = <span class="ruby-identifier">srid</span>
119:     <span class="ruby-ivar">@with_z</span> = <span class="ruby-identifier">with_z</span>
120:     <span class="ruby-ivar">@with_m</span> = <span class="ruby-identifier">with_m</span>
121:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">klass</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Redefines <a href="SpatialColumn.html#M000037">klass</a> to add support for
geometries
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/spatial_adapter/lib/common_spatial_adapter.rb, line 145</span>
145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">klass</span>
146:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">type</span>
147:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:geometry</span> <span class="ruby-keyword kw">then</span> <span class="ruby-constant">GeoRuby</span><span class="ruby-operator">::</span><span class="ruby-constant">SimpleFeatures</span><span class="ruby-operator">::</span><span class="ruby-constant">Geometry</span>
148:     <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">super</span>
149:     <span class="ruby-keyword kw">end</span>
150:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">type_cast</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Redefines <a href="SpatialColumn.html#M000035">type_cast</a> to add support
for geometries
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/spatial_adapter/lib/common_spatial_adapter.rb, line 125</span>
125:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type_cast</span>(<span class="ruby-identifier">value</span>)
126:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
127:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">type</span>
128:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:geometry</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">string_to_geometry</span>(<span class="ruby-identifier">value</span>)
129:     <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">super</span>
130:     <span class="ruby-keyword kw">end</span>
131:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">type_cast_code</span><span class="method-args">(var_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Redefines <a href="SpatialColumn.html#M000036">type_cast_code</a> to add
support for geometries.
</p>
<p>
WARNING : Since <a href="ActiveRecord.html">ActiveRecord</a> keeps only the
string values directly returned from the database, it translates from these
to the correct types everytime an attribute is read (using the code
returned by this method), which is probably ok for simple types, but might
be less than efficient for geometries. Also you cannot modify the geometry
object returned directly or your change will not be saved.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/spatial_adapter/lib/common_spatial_adapter.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">type_cast_code</span>(<span class="ruby-identifier">var_name</span>)
137:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">type</span>
138:     <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:geometry</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{self.class.name}.string_to_geometry(#{var_name})&quot;</span>
139:     <span class="ruby-keyword kw">else</span> <span class="ruby-keyword kw">super</span>
140:     <span class="ruby-keyword kw">end</span>
141:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>